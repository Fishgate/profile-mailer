function disableForm(e,t,n){$(e).removeClass(n);$(t).attr("disabled","disabled")}function enableForm(e,t,n){$(e).addClass(n);$(t).removeAttr("disabled")}$(function(){function r(t){disableForm("#importLoader","#upload","invisible");var n=validate_file("#fileupload",[".csv"],2);if(!n){$.growl.error({message:e.FILE_INVALID});return!1}}function s(e){var t=e.trim();t=JSON.parse(t);if(t.result==="success")window.location="importconfig.php?id="+t.id;else{$.growl.error({message:e});enableForm("#importLoader","#upload","invisible")}}function o(t){disableForm("#loader","#login","invisible");var n=validate(t[0].value),r=validate(t[1].value);if(n&&r)return!0;$.growl.error({message:e.EMPTY_USER_PASS});enableForm("#loader","#login","invisible");return!1}function u(e){var t=e.trim();if(t==="success")window.location="dashboard.php";else{$.growl.error({message:e});enableForm("#loader","#login","invisible")}}function a(t){disableForm("#quickSendLoader","#send","invisible");var n=!0;if($("#template").val()==0){$.growl.error({message:e.NO_TEMPLATE_SELECTED});enableForm("#quickSendLoader","#send","invisible");return!1}for(i in t)if(!validate(t[i].value)){n=!1;break}if(!n){$.growl.error({message:e.EMPTY_FORM_FIELDS});enableForm("#quickSendLoader","#send","invisible");return!1}}function f(t){var n=t.trim();if(n==="success"){$("#form_elements").html("<p>No template currently selected.</p>");enableForm("#quickSendLoader","#send","invisible");$.growl.notice({title:"Success!",message:e.QUICKSEND_SUCCCESS})}else{enableForm("#quickSendLoader","#send","invisible");$.growl.error({message:t})}}var e={};$.ajax({url:"alerts.json",async:!1,dataType:"json",success:function(t){e=t}});var t=window.retina||window.devicePixelRatio>1,n=$("#color").val();hexcolor=$(".hex");hexcolor.css("background",n);$("#color").on("change",function(){n=$("#color").val();hexcolor.css("background",n)});$("#importlistform").ajaxForm({url:"import.exec.php",type:"post",beforeSubmit:r,success:s,resetForm:!0});$("#loginform").ajaxForm({url:"login.auth.php",type:"get",beforeSubmit:o,success:u,resetForm:!0});$("#template").change(function(){if($(this).val()!=0){$("#templateSelectLoader").removeClass("hidden");$.ajax({url:"template.exec.php",type:"GET",data:{template:$(this).val()},success:function(e){$("#templateSelectLoader").addClass("hidden");$("#form_elements").html(e)},error:function(e){$("#templateSelectLoader").addClass("hidden");$("#form_elements").html(e)}})}else $("#form_elements").html(e.EMPTY_TEMPLATE)});$("#quicksendform").ajaxForm({url:"mail.send.php",type:"POST",beforeSubmit:a,success:f,resetForm:!0});if($("#canvas").length>0)var l=[{value:quicksend_data.unopened,color:"#E74C3C"},{value:quicksend_data.opened,color:"#2ECC71"}],c=(new Chart(document.getElementById("canvas").getContext("2d"))).Pie(l)});