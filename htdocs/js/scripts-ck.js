function disableForm(e,t,n){$(e).removeClass(n);$(t).attr("disabled","disabled")}function enableForm(e,t,n){$(e).addClass(n);$(t).removeAttr("disabled")}function IsJsonString(e){try{JSON.parse(e)}catch(t){return!1}return!0}$(function(){function n(t){disableForm("#importLoader","#upload","invisible");var n=validate(t[0].value),r=validate(t[1].value),i=validate_file("#fileupload",[".csv"],2);if(n&&r&&i)return!0;$.growl.error({message:e.IMPORT_FORM_INVALID});enableForm("#importLoader","#upload","invisible");return!1}function r(e){var t=e.trim();console.log(t)}function s(t){disableForm("#importconfigLoader","#update","invisible");var n=!0;$(".colNames").each(function(){validate($(this).val())||(n=!1)});if(n)return!0;$.growl.error({message:e.COL_HEADERS_EMPTY});enableForm("#importconfigLoader","#update","invisible");return!1}function o(e){var t=e.trim();t==="success"&&(window.location="importsuccess.php")}function u(t){disableForm("#loader","#login","invisible");var n=validate(t[0].value),r=validate(t[1].value);if(n&&r)return!0;$.growl.error({message:e.EMPTY_USER_PASS});enableForm("#loader","#login","invisible");return!1}function a(e){var t=e.trim();if(t==="success")window.location="dashboard.php";else{$.growl.error({message:e});enableForm("#loader","#login","invisible")}}function f(t){disableForm("#quickSendLoader","#send","invisible");var n=!0;if($("#template").val()==0){$.growl.error({message:e.NO_TEMPLATE_SELECTED});enableForm("#quickSendLoader","#send","invisible");return!1}for(i in t)if(!validate(t[i].value)){n=!1;break}if(!n){$.growl.error({message:e.EMPTY_FORM_FIELDS});enableForm("#quickSendLoader","#send","invisible");return!1}}function l(t){var n=t.trim();if(n==="success"){$("#form_elements").html("<p>No template currently selected.</p>");enableForm("#quickSendLoader","#send","invisible");$.growl.notice({title:"Success!",message:e.QUICKSEND_SUCCCESS})}else{enableForm("#quickSendLoader","#send","invisible");$.growl.error({message:t})}}var e={};$.ajax({url:"alerts.json",async:!1,dataType:"json",success:function(t){e=t}});var t=window.retina||window.devicePixelRatio>1;$("#importlistform").ajaxForm({url:"importlist.exec.php",type:"post",beforeSubmit:n,success:r,resetForm:!0});$("#importconfigform").ajaxForm({url:"importconfig.exec.php",type:"post",beforeSubmit:s,success:o,resetForm:!0});$("#loginform").ajaxForm({url:"login.auth.php",type:"get",beforeSubmit:u,success:a,resetForm:!0});$("#template").change(function(){if($(this).val()!=0){$("#templateSelectLoader").removeClass("hidden");$.ajax({url:"template.exec.php",type:"GET",data:{template:$(this).val()},success:function(e){$("#templateSelectLoader").addClass("hidden");$("#form_elements").html(e)},error:function(e){$("#templateSelectLoader").addClass("hidden");$("#form_elements").html(e)}})}else $("#form_elements").html(e.EMPTY_TEMPLATE)});$("#quicksendform").ajaxForm({url:"mail.send.php",type:"POST",beforeSubmit:f,success:l,resetForm:!0});if($("#canvas").length>0)var c=[{value:quicksend_data.unopened,color:"#E74C3C"},{value:quicksend_data.opened,color:"#2ECC71"}],h=(new Chart(document.getElementById("canvas").getContext("2d"))).Pie(c)});